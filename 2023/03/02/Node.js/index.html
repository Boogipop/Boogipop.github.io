<!DOCTYPE html>
<html lang="zh-CN">
    <head prefix="og: https://ogp.me/ns#">
  <meta charset="utf-8">
  <meta name="referrer" content="no-referrer" />
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="color-scheme" content="light dark">
  
  <title>Node.Js - Boogiepop Doesn&#39;t Laugh</title>
  
    <link rel="shortcut icon" href="/favicon.png">
  
  
    <link rel='manifest' href='/manifest.json'>
  

  
  
  
  <meta property="og:title" content="Node.Js - Boogiepop Doesn&#39;t Laugh" />
  
  <meta property="og:type" content="article" />
  
  <meta property="og:url" content="http://boogipop.com/2023/03/02/Node.js/index.html" />
  
  <meta property="og:image" content="/favicon.png" />
  
  <meta property="og:article:published_time" content="2023-03-02T10:24:06.000Z" />
  
  <meta property="og:article:author" content="Boogipop" />
  
  

  
<link rel="stylesheet" href="/css/var.css">

  
<link rel="stylesheet" href="/css/main.css">

  
<link rel="stylesheet" href="/css/typography.css">

  
<link rel="stylesheet" href="/css/code-highlighting.css">

  
<link rel="stylesheet" href="/css/components.css">

  
<link rel="stylesheet" href="/css/nav.css">

  
<link rel="stylesheet" href="/css/paginator.css">

  
<link rel="stylesheet" href="/css/footer.css">

  
<link rel="stylesheet" href="/css/post-list.css">

  
<link rel="stylesheet" href="/css/giscus.css">

  
  
<link rel="stylesheet" href="/css/rainbow-banner.css">

  
  
  
<link rel="stylesheet" href="/css/toc.css">

  
  
    
<link rel="stylesheet" href="/css/giscus.css">

  
  
  
  
<link rel="stylesheet" href="/css/post.css">

  
  
  
  
  

  
<meta name="generator" content="Hexo 6.3.0"></head>
    <body
        data-color-scheme="auto"
        data-uppercase-categories="true"
        
        data-rainbow-banner="true"
        data-rainbow-banner-shown="auto"
        data-rainbow-banner-month="6"
        data-rainbow-banner-colors="#e50000,#ff8d00,#ffee00,#008121,#004cff,#760188"
        
        data-config-root="/"
        
        data-toc="true"
        data-toc-max-depth="2"
        
        
    >
        <nav id="theme-nav">
    <div class="inner">
        <a class="title" href="/">Blog</a>
        <div class="nav-arrow"></div>
        <div class="nav-items">
            <a class="nav-item nav-item-home" href="/">Home</a>
            
            
            <a class="nav-item" href="/archives">Archives</a>
            
            
            
            <a class="nav-item" href="/friends">Friends</a>
            
            
            
            <a class="nav-item" href="/about">About</a>
            
            
            
            <a class="nav-item" href="/categories">Categories</a>
            
            
            
            <a class="nav-item nav-item-github nav-item-icon" href="https://github.com/MrWillCom" target="_blank" aria-label="GitHub">&nbsp;</a>
            
            
            
            <a class="nav-item nav-item-codepen nav-item-icon" href="https://codepen.io/mrwillcom" target="_blank" aria-label="CodePen">&nbsp;</a>
            
            
            
            <a class="nav-item nav-item-patreon nav-item-icon" href="https://www.patreon.com/MrWillCom" target="_blank" aria-label="Patreon">&nbsp;</a>
            
            
            
            <a class="nav-item nav-item-mastodon nav-item-icon" href="https://noc.social/@MrWillCom" target="_blank" aria-label="Mastodon">&nbsp;</a>
            
            
            
            <a class="nav-item nav-item-discord nav-item-icon" href="https://discord.gg/UKuFDjcfY8" target="_blank" aria-label="Discord">&nbsp;</a>
            
            
            
            <a class="nav-item nav-item-search nav-item-icon" href="/search" target="_blank" aria-label="Search">&nbsp;</a>
            
            
        </div>
    </div>
</nav>
        
<article class="post">
    <div class="meta">
        
        <div class="categories text-uppercase">
        
            <a href="/categories/Development/">Development</a>
        
        </div>
        

        
        <div class="date" id="date">
            <span>March</span>
            <span>2,</span>
            <span>2023</span>
        </div>
        

        <h2 class="title">Node.Js</h2>
    </div>

    <div class="divider"></div>

    <div class="content">
        <h2 id="官方文档"><a href="#官方文档" class="headerlink" title="官方文档"></a>官方文档</h2><p><a target="_blank" rel="noopener" href="https://nodejs.org/docs/latest-v16.x/api/fs.html#class-fsstats">https://nodejs.org/docs/latest-v16.x/api/</a><br>官方文档永远是最好的老师</p>
<h2 id="Node-js简介"><a href="#Node-js简介" class="headerlink" title="Node.js简介"></a>Node.js简介</h2><p>node意为节点，直译过来就是节点js，通俗的来说Nodejs就是运行在服务端的js环境<br>之前写的JS全是在浏览器运行的，而Node.js可以让JS代码直接在服务器运行</p>
<h2 id="使用Nodejs执行js文件"><a href="#使用Nodejs执行js文件" class="headerlink" title="使用Nodejs执行js文件"></a>使用Nodejs执行js文件</h2><p>从简单的Hello Node开始，我们再命令行窗口输入node就可以进入交互界面：<br><img src="https://cdn.nlark.com/yuque/0/2022/png/32634994/1669455695224-87a09d08-caf2-4478-b5bb-9a5565722b7c.png#averageHue=%23343840&clientId=u259e40b2-5090-4&from=paste&height=103&id=u49dc91f5&name=image.png&originHeight=129&originWidth=662&originalType=binary&ratio=1&rotation=0&showTitle=false&size=11512&status=done&style=none&taskId=ucac88293-75bc-46b2-a7ac-ac99991e3be&title=&width=529.6" alt="image.png"><br>可以用js的语句输出一段话</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> name=<span class="string">&quot;hello&quot;</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(name+<span class="string">&quot;nodejs&quot;</span>);</span><br><span class="line"><span class="comment">// alert(&quot;hello nodejs&quot;);</span></span><br></pre></td></tr></table></figure>
<p>运行<code>node hello.js</code>即可在服务端运行js文件了<br><img src="https://cdn.nlark.com/yuque/0/2022/png/32634994/1669455918734-5c1ae1bb-4cc6-4d51-b831-6ecf27da3337.png#averageHue=%2333373f&clientId=u259e40b2-5090-4&from=paste&height=47&id=u3f21bc1d&name=image.png&originHeight=59&originWidth=743&originalType=binary&ratio=1&rotation=0&showTitle=false&size=5064&status=done&style=none&taskId=ua6b8f4f1-c82a-48fe-9a3f-fa6c00ff1a3&title=&width=594.4" alt="image.png"></p>
<h2 id="Node-js基础模块化简介"><a href="#Node-js基础模块化简介" class="headerlink" title="Node.js基础模块化简介"></a>Node.js基础模块化简介</h2><p>为了敲代码有更舒适的体验，编写js代码没啥问题，但是假如要用nodejs的函数和代码没有tab提示那就难受了所以IDEA配置一下：<br><img src="https://cdn.nlark.com/yuque/0/2022/png/32634994/1669456410647-92fd0cf9-1732-4a9d-b15c-c8bacca81da8.png#averageHue=%233e4144&clientId=u259e40b2-5090-4&from=paste&height=138&id=u69310f59&name=image.png&originHeight=172&originWidth=852&originalType=binary&ratio=1&rotation=0&showTitle=false&size=15862&status=done&style=none&taskId=u5b3febc4-6569-4d27-9616-2f95aca3f13&title=&width=681.6" alt="image.png"><br>enable那个code assistance即可</p>
<p>CommonJS规范:<br>ES的缺陷（ECMAscript）:</p>
<ul>
<li>没有模块</li>
<li>标准库少</li>
<li>没有标准接口</li>
<li>缺乏管理系统</li>
</ul>
<p>在Node.js中模块也就是其他语言中的库，比如python的import这样式儿的<br>用<code>require(&quot;文件名&quot;)</code>这种形式去引入模块，文件名中的.js可以省略<br>一个模块中的变量和函数在其他js文件中无法访问，因为它不是全局用域，相当于包裹在一个函数内，想要解决这个问题，我们得向外部暴露（export）属性<br><code>exports.x=&quot;test&quot;</code>,这样就向外部暴露了属性<br>这样<code>console.log(require(&#39;xx.js&quot;))</code>返回的是以下内容<br><img src="https://cdn.nlark.com/yuque/0/2022/png/32634994/1669459591316-766bbf90-41e1-4230-ac0f-f0a7b8bce362.png#averageHue=%23f4f7f4&clientId=u259e40b2-5090-4&from=paste&height=55&id=uc1f66a90&name=image.png&originHeight=69&originWidth=440&originalType=binary&ratio=1&rotation=0&showTitle=false&size=24692&status=done&style=none&taskId=ub8d2ad09-a955-468a-99e8-af83c5e9c03&title=&width=352" alt="image.png"><br>想要获得这个x只需<code>var md=require(&quot;xx.js&quot;);console.log(md.x)</code>即可，方法也同理<br>想暴露在外用export，不想暴露就直接写里边儿即可</p>
<h2 id="模块化详解"><a href="#模块化详解" class="headerlink" title="模块化详解"></a>模块化详解</h2><p>模块分为2大类：<code>核心模块，文件模块</code><br>核心模块就是Node.js自带的模块，文件模块就是开发者自己写的js文件做成的模块，这两本质一样<br>核心模块的标识就是<strong>模块的名字</strong>，文件模块的标识是<strong>文件的路径</strong><br>在Node中没有<code>windows</code>全局变量，取而代之的是<code>global</code><br>在js里定义全局变量就不要再变量名前加<code>var</code>即可<br>要证明程序运行在函数内，就使用<code>console.log(arguments)</code>，arguments参数只在函数体里面有，<code>arguments.callee</code>返回的是当前的函数是谁<br><code>arguments.callee+&#39;&#39;</code>把这个对象变为字符串，输出完整的函数：<br><img src="https://cdn.nlark.com/yuque/0/2022/png/32634994/1669472458074-7baefd91-b3f7-4566-a5a1-987b231de743.png#averageHue=%23969b7c&clientId=u6d0fcfb8-1d5e-4&from=paste&height=647&id=ub8de86b6&name=image.png&originHeight=809&originWidth=1190&originalType=binary&ratio=1&rotation=0&showTitle=false&size=57980&status=done&style=none&taskId=u57a0b9f5-a40c-442c-9926-cb56e04da5a&title=&width=952" alt="image.png"></p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> (<span class="params">exports, <span class="keyword">require</span>, module, __filename, __dirname</span>) </span>&#123;</span><br><span class="line">let name=<span class="string">&quot;hello&quot;</span>;</span><br><span class="line">console.<span class="title function_ invoke__">log</span>(arguments.callee+<span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="comment">// alert(&quot;hello nodejs&quot;);</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>也就是说Node会自动给我们添加<code>function (exports, require, module, __filename, __dirname)</code><br>所以为什么能用export呢，因为他是我们函数的一个属性<br><code>console.log(__filename)</code>打印当前模块的路径<img src="https://cdn.nlark.com/yuque/0/2022/png/32634994/1669482592201-5045756d-cbaa-4af6-9c28-2bd1cbcce74e.png#averageHue=%23302f2e&clientId=u6d0fcfb8-1d5e-4&from=paste&height=41&id=u15638b7c&name=image.png&originHeight=51&originWidth=380&originalType=binary&ratio=1&rotation=0&showTitle=false&size=3751&status=done&style=none&taskId=u5d3c996f-c9be-4a19-b66c-b19f6514d2b&title=&width=304" alt="image.png"><br><code>__dirname</code>就是js文件所在文件夹的路径</p>
<h2 id="exports和module-exports"><a href="#exports和module-exports" class="headerlink" title="exports和module.exports"></a>exports和module.exports</h2><p>这两东西有啥区别呢?</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span>=&#123;</span><br><span class="line">    <span class="attr">name</span>:<span class="string">&quot;kino&quot;</span>,</span><br><span class="line">    <span class="attr">age</span>:<span class="number">19</span>,</span><br><span class="line">    <span class="attr">sayname</span>:<span class="keyword">function</span> (<span class="params"></span>)&#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;i am boogipop&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> test=<span class="built_in">require</span>(<span class="string">&quot;./module&quot;</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(test.<span class="property">name</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(test.<span class="property">age</span>);</span><br><span class="line">test.<span class="title function_">sayname</span>();</span><br></pre></td></tr></table></figure>
<p><img src="https://cdn.nlark.com/yuque/0/2022/png/32634994/1669546566404-c3afc715-340a-4769-95e7-8cd5b9c4989e.png#averageHue=%232c2c2b&clientId=u5fc5e714-9120-4&from=paste&height=104&id=u7c6f6968&name=image.png&originHeight=130&originWidth=385&originalType=binary&ratio=1&rotation=0&showTitle=false&size=5523&status=done&style=none&taskId=u5d0c4dbe-262b-4ff1-9a15-93b566358be&title=&width=308" alt="image.png"><br>在module.exports模式中可以这样取定义暴露变量，而exports是不可以的<br>同时：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> obj=&#123;&#125;;</span><br><span class="line">obj.<span class="property">a</span>=&#123;&#125;;</span><br><span class="line"><span class="keyword">var</span> a=obj.<span class="property">a</span>;</span><br><span class="line">a.<span class="property">name</span>=<span class="string">&quot;kino&quot;</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(obj.<span class="property">a</span>.<span class="property">name</span>);</span><br></pre></td></tr></table></figure>
<p><img src="https://cdn.nlark.com/yuque/0/2022/png/32634994/1669546898433-1292aa34-9054-49bc-99d1-4cada440ee86.png#averageHue=%232f2e2e&clientId=u5fc5e714-9120-4&from=paste&height=46&id=u5ba87c63&name=image.png&originHeight=58&originWidth=858&originalType=binary&ratio=1&rotation=0&showTitle=false&size=6939&status=done&style=none&taskId=u8624afc0-d99d-4ec0-b58b-830846edd6d&title=&width=686.4" alt="image.png"><br>由于a指向了obj.a，所以obj.a也跟着改变了，这一点和其他语言貌似有些不同，他等号就是指向了</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> obj=&#123;&#125;;</span><br><span class="line">obj.<span class="property">a</span>=&#123;&#125;;</span><br><span class="line"><span class="keyword">var</span> a=obj.<span class="property">a</span>;</span><br><span class="line">a.<span class="property">name</span>=<span class="string">&quot;kino&quot;</span>;</span><br><span class="line">a=<span class="keyword">new</span> <span class="title class_">Object</span>();</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(obj.<span class="property">a</span>.<span class="property">name</span>);</span><br></pre></td></tr></table></figure>
<p>假如把a重新赋值一个对象，那obj.a仍然不会改变的：<br><img src="https://cdn.nlark.com/yuque/0/2022/png/32634994/1669546973210-8ebb56a0-6e8d-4744-b2bc-323da9f26c9f.png#averageHue=%232f2e2e&clientId=u5fc5e714-9120-4&from=paste&height=57&id=u3563cd1b&name=image.png&originHeight=71&originWidth=816&originalType=binary&ratio=1&rotation=0&showTitle=false&size=7223&status=done&style=none&taskId=u133fd465-d24a-469c-a204-fe562d306b0&title=&width=652.8" alt="image.png"><br>这里要搞清楚，这是深拷贝和浅拷贝，这里涉及到<code>栈内存</code>和<code>堆内存</code>：<br><img src="https://cdn.nlark.com/yuque/0/2022/png/32634994/1669547272669-c3fe94fc-ca05-479e-b099-fc2606857757.png#averageHue=%23f9fcfa&clientId=u5fc5e714-9120-4&from=paste&height=518&id=udacead02&name=image.png&originHeight=647&originWidth=1296&originalType=binary&ratio=1&rotation=0&showTitle=false&size=70896&status=done&style=none&taskId=u1fae3f3f-1489-4135-ad68-3660118baf3&title=&width=1036.8" alt="image.png"><br>这样普通的基本类型赋值是在栈内存进行的，所以不会有指向问题<br>但对象类型就不一样了：<br><img src="https://cdn.nlark.com/yuque/0/2022/png/32634994/1669547667333-32c4469a-c434-4fbc-a1f9-088b3b01a2d3.png#averageHue=%23f8fbf8&clientId=u5fc5e714-9120-4&from=paste&height=533&id=ub4a2f33b&name=image.png&originHeight=666&originWidth=1452&originalType=binary&ratio=1&rotation=0&showTitle=false&size=151816&status=done&style=none&taskId=u17ecfd5c-e3c3-40f6-bcaa-f7cb0b0508b&title=&width=1161.6" alt="image.png"><br>当我们new了一个对象时，会在堆内存中创建一个对象地址，我们赋值操作给的是地址，所以才会有上面的结果<br><img src="https://cdn.nlark.com/yuque/0/2022/png/32634994/1669547681875-932ffa72-6feb-4058-9200-f550718e1600.png#averageHue=%23f8fbf8&clientId=u5fc5e714-9120-4&from=paste&height=530&id=u340c9db9&name=image.png&originHeight=663&originWidth=1494&originalType=binary&ratio=1&rotation=0&showTitle=false&size=129158&status=done&style=none&taskId=ube6a9629-4b17-4429-b8bf-38e127d4ed5&title=&width=1195.2" alt="image.png"><br>但是当我们再给obj2进行赋值时，是在堆内存进行赋值，所以没有影响堆内存中的对象，因此对obj一点影响也没有</p>
<h2 id="包简介"><a href="#包简介" class="headerlink" title="包简介"></a>包简介</h2><p>包可以理解为，更高级的模块，里面有很多简单模块整合在一起<br><img src="https://cdn.nlark.com/yuque/0/2022/png/32634994/1669548445962-7cfc18cd-e55b-43a3-8323-8e93885bfb04.png#averageHue=%23ecefec&clientId=u5fc5e714-9120-4&from=paste&height=470&id=u0962f214&name=image.png&originHeight=588&originWidth=919&originalType=binary&ratio=1&rotation=0&showTitle=false&size=344723&status=done&style=none&taskId=u4d6dd88f-b799-4454-830b-f638be00a08&title=&width=735.2" alt="image.png"><br><img src="https://cdn.nlark.com/yuque/0/2022/png/32634994/1669548658939-5f1facfc-d8d8-4d56-85a2-0698671ff0e9.png#averageHue=%23eaefea&clientId=u5fc5e714-9120-4&from=paste&height=547&id=ud33efe88&name=image.png&originHeight=684&originWidth=1062&originalType=binary&ratio=1&rotation=0&showTitle=false&size=491857&status=done&style=none&taskId=u5caa0e93-b3cc-41e5-9f51-d6bcc2121de&title=&width=849.6" alt="image.png"></p>
<h2 id="npm简介"><a href="#npm简介" class="headerlink" title="npm简介"></a>npm简介</h2><p>npm全程node package manager，叫做node包管理系统<br>常用命令：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">npm -v</span><br><span class="line">查看版本</span><br><span class="line">npm </span><br><span class="line">帮助说明</span><br><span class="line">npm search 包</span><br><span class="line">搜索包名</span><br><span class="line">npm install 包</span><br><span class="line">下载包（安装路径）</span><br><span class="line">npm install 包 -g</span><br><span class="line">全局模式安装包</span><br><span class="line">npm remove 包</span><br><span class="line">删除包</span><br><span class="line">npm install xxx --save</span><br><span class="line">将包安装到依赖</span><br></pre></td></tr></table></figure>
<p>假如想在当前目录去安装包，在当前位置执行<code>npm init</code>先初始化，再<code>npm install</code>即可<br>要引入就要在package.json文件所在路劲创建js文件，上面的init就是创建json文件<br><code>--save</code>:它的特点是，在安装的同时，把这个包设置为了依赖文件：<br><img src="https://cdn.nlark.com/yuque/0/2022/png/32634994/1669549819675-97650370-58eb-4d96-9f6d-85e605e5b729.png#averageHue=%23fafdfa&clientId=u5fc5e714-9120-4&from=paste&height=312&id=u2378ea3e&name=image.png&originHeight=390&originWidth=1052&originalType=binary&ratio=1&rotation=0&showTitle=false&size=181767&status=done&style=none&taskId=u63337df9-4661-4ecf-9c42-d4d86e68dcf&title=&width=841.6" alt="image.png"><br>加了之后下次<code>npm install</code>后面啥也不跟，就会自动安装math类</p>
<h2 id="配置cnpm"><a href="#配置cnpm" class="headerlink" title="配置cnpm"></a>配置cnpm</h2><p>cnpm是啥呢，由于npm用的是外国的网，所以会很慢，中国人为了解决这一问题搞了个镜像，叫做cnpm，这样就可以对着中国的镜像服务器去下载包了，cnpm大大的加快了我们下载的速度<br>配置cnpm：<br>运行<code>npm install -g cnpm --registry=https://registry.npmmirror.com</code>下载cnpm：<br><img src="https://cdn.nlark.com/yuque/0/2022/png/32634994/1669550795222-c87e8d76-bf56-4857-b7a1-85ec8f98a4a5.png#averageHue=%232f333b&clientId=u5fc5e714-9120-4&from=paste&height=146&id=u9048a521&name=image.png&originHeight=182&originWidth=1372&originalType=binary&ratio=1&rotation=0&showTitle=false&size=18184&status=done&style=none&taskId=u39d4a027-b40f-4ee8-b429-75562b829c8&title=&width=1097.6" alt="image.png"><br>然后我们就可以用cnpm去下载express框架的包，cnpm的指令和npm一模一样，在这之前我们先初始化一下我们需要安装包的文件夹：<br><img src="https://cdn.nlark.com/yuque/0/2022/png/32634994/1669550966934-c19ff48b-0e55-454f-aa08-5c983f563c13.png#averageHue=%23373b43&clientId=u5fc5e714-9120-4&from=paste&height=38&id=u49ec2e40&name=image.png&originHeight=48&originWidth=457&originalType=binary&ratio=1&rotation=0&showTitle=false&size=3662&status=done&style=none&taskId=u264395d4-3941-441a-a896-bbd27bd03f2&title=&width=365.6" alt="image.png"><br>entrypoint就是哪个js文件需要引用包，这就是入口，这里最好用一下index.js<br>接下来在这个文件夹安装express即可：<br><img src="https://cdn.nlark.com/yuque/0/2022/png/32634994/1669551051915-eac09498-5a4d-42ed-90ea-b25fb04cd2d3.png#averageHue=%232f333a&clientId=u5fc5e714-9120-4&from=paste&height=112&id=u58cd87bd&name=image.png&originHeight=140&originWidth=741&originalType=binary&ratio=1&rotation=0&showTitle=false&size=7630&status=done&style=none&taskId=u419de2a4-cc64-4e82-b6ea-b76f3b0c30f&title=&width=592.8" alt="image.png"><br>cnpm大大的加快了我们的speed<br><img src="https://cdn.nlark.com/yuque/0/2022/png/32634994/1669551073777-52d5e667-a46d-4589-a4e1-50a18c03294e.png#averageHue=%23fbfaf8&clientId=u5fc5e714-9120-4&from=paste&height=507&id=ufd9834c2&name=image.png&originHeight=634&originWidth=1213&originalType=binary&ratio=1&rotation=0&showTitle=false&size=84163&status=done&style=none&taskId=u09305963-2f2e-4f7a-8cda-97103096fc7&title=&width=970.4" alt="image.png"></p>
<h2 id="node搜索包的流程"><a href="#node搜索包的流程" class="headerlink" title="node搜索包的流程"></a>node搜索包的流程</h2><p>node在使用模块名引入时，它首先在当前目录的node_moudle去找到是否有这个模块，如果没有就去上一级找node_moudle，如果上级也没有，那就上上级，一直到根目录都没有，那就报错</p>
<h2 id="Buffer缓冲区"><a href="#Buffer缓冲区" class="headerlink" title="[*]Buffer缓冲区"></a>[*]Buffer缓冲区</h2><p>啥是buffer缓冲区呢？实际上buffer和数组十分的类似，但是数组能存音乐，能存视频吗，那肯定是不可以的，buffer就是专门用来储存二进制数据的，使用buffer不需要引入模块，直接使用即可</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> str=<span class="string">&quot;hello kino&quot;</span>;</span><br><span class="line"><span class="comment">//创建buffer</span></span><br><span class="line"><span class="keyword">var</span> buf=<span class="title class_">Buffer</span>.<span class="title function_">from</span>(str);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(buf);</span><br></pre></td></tr></table></figure>
<p><img src="https://cdn.nlark.com/yuque/0/2022/png/32634994/1669552741882-babcf776-c323-4b0b-b359-450d61c54ac5.png#averageHue=%239c876a&clientId=u5fc5e714-9120-4&from=paste&height=60&id=u24ba5ff6&name=image.png&originHeight=75&originWidth=764&originalType=binary&ratio=1&rotation=0&showTitle=false&size=11592&status=done&style=none&taskId=u8937e8d6-5ede-47b6-b5ac-8235f92c489&title=&width=611.2" alt="image.png"><br>不是说二进制吗，为什么是十六进制<br>确实是二进制，但是在计算机中，二进制是以十六进制去呈现的<br>buffer中的每一个元素都是从<code>00-ff</code>,也就是0-255<br><img src="https://cdn.nlark.com/yuque/0/2022/png/32634994/1669553469874-5e57a29b-7086-44af-92fe-0dc8236e3393.png#averageHue=%23f4f9f1&clientId=u5fc5e714-9120-4&from=paste&height=267&id=u16daeb5e&name=image.png&originHeight=334&originWidth=622&originalType=binary&ratio=1&rotation=0&showTitle=false&size=144238&status=done&style=none&taskId=u1629cbe6-e7b4-44af-810e-c79d2ceaebf&title=&width=497.6" alt="image.png"><br>也就是我们的hello中一个字母就是一个字节<br><code>buf.length</code>表示占用内存大小<br>创建指定大小的buffer：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> buf2=<span class="keyword">new</span> <span class="title class_">Buffer</span>(<span class="number">1024</span>);<span class="comment">//创造大小为1024也就是1k的buffer</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(buf2.<span class="property">length</span>);</span><br></pre></td></tr></table></figure>
<p><img src="https://cdn.nlark.com/yuque/0/2022/png/32634994/1669553820273-33b953ca-a95b-4e7c-a7bd-2276d404e966.png#averageHue=%232e2d2c&clientId=u5fc5e714-9120-4&from=paste&height=26&id=u1e633027&name=image.png&originHeight=32&originWidth=490&originalType=binary&ratio=1&rotation=0&showTitle=false&size=3267&status=done&style=none&taskId=u556b40a1-491a-43d2-a321-2d57806bca1&title=&width=392" alt="image.png"><br>但是这种方法已经被废弃了，所以会出现报错：<br><img src="https://cdn.nlark.com/yuque/0/2022/png/32634994/1669553850128-9f186fa9-62f6-4a7c-b7fe-dff0db464deb.png#averageHue=%232e2d2c&clientId=u5fc5e714-9120-4&from=paste&height=87&id=u825e8f08&name=image.png&originHeight=109&originWidth=1752&originalType=binary&ratio=1&rotation=0&showTitle=false&size=19142&status=done&style=none&taskId=u40f05879-426a-4bea-842d-8a89c46c21a&title=&width=1401.6" alt="image.png"><br>因为有安全隐患，因此使用下面的方法：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> buf2=<span class="title class_">Buffer</span>.<span class="title function_">alloc</span>(<span class="number">20</span>);<span class="comment">//20字节大小</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(buf2);</span><br><span class="line">buf2[<span class="number">0</span>]=<span class="number">88</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(buf2);</span><br></pre></td></tr></table></figure>
<p><img src="https://cdn.nlark.com/yuque/0/2022/png/32634994/1669553987324-35c40151-968d-47c1-9f9d-d4945e8a1d6f.png#averageHue=%23957b5d&clientId=u5fc5e714-9120-4&from=paste&height=101&id=u3d18a981&name=image.png&originHeight=126&originWidth=788&originalType=binary&ratio=1&rotation=0&showTitle=false&size=12827&status=done&style=none&taskId=ue736c559-83bf-469c-8091-8b69c1c0a7a&title=&width=630.4" alt="image.png"><br>可以看到可以用数组的样子去操控buffer，但是为什么是58呢？因为是十六进制<br><img src="https://cdn.nlark.com/yuque/0/2022/png/32634994/1669554022255-cf99467a-4cb9-4cfd-b672-8e4939a88099.png#averageHue=%237f7056&clientId=u5fc5e714-9120-4&from=paste&height=498&id=u879b76e2&name=image.png&originHeight=622&originWidth=1243&originalType=binary&ratio=1&rotation=0&showTitle=false&size=54232&status=done&style=none&taskId=ub7e533a0-e494-4a6c-80e4-e3064311b3f&title=&width=994.4" alt="image.png"><br>改为0x58也可以，可以识别十六进制字符串<br>buffer的大小一经确定，再也不可以修改了，buffer是对底层内存的直接操作<br>加入我们<code>console.log(buf[1])</code>这样不会输出十六进制，只会输出十进制<br>假如需要转换就在后面加一个toString(16)即可也就是<code>console.log(buf[2].toString(16))</code></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Buffer</span>.<span class="title function_">allocUnsafe</span>(<span class="number">20</span>);<span class="comment">//创建指定大小的内存，但buffer中可能有敏感信息</span></span><br></pre></td></tr></table></figure>
<p>敏感信息就是初始化的时候可能不是00，也就是这个内存空间可能是之前其他代码用过的<br>如果我们需要将buffer缓冲区的数据转化为字符串的话直接<code>console.log(buf.toString())</code>即可</p>
<h2 id="同步文件写入"><a href="#同步文件写入" class="headerlink" title="[*]同步文件写入"></a>[*]同步文件写入</h2><p>fs全称file system也就是文件系统，顾名思义也就是对文件进行操作的系统，那必然也有I&#x2F;O操作，也就是input和output<br>使用fs模块需要先引入一下，由于是核心模块所以不需要下载<br><img src="https://cdn.nlark.com/yuque/0/2022/png/32634994/1669562220004-592cc354-a139-44ea-ab0c-a05b4da53abb.png#averageHue=%2359574a&clientId=u5fc5e714-9120-4&from=paste&height=694&id=uec44075a&name=image.png&originHeight=868&originWidth=1033&originalType=binary&ratio=1&rotation=0&showTitle=false&size=85662&status=done&style=none&taskId=uae0614f2-9cdc-466c-8386-d265d2a69fe&title=&width=826.4" alt="image.png"><br>可以看到有很多方法</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> fs=<span class="built_in">require</span>(<span class="string">&quot;fs&quot;</span>);</span><br><span class="line"><span class="comment">//同步文件的写入</span></span><br><span class="line"><span class="keyword">var</span> fd=fs.<span class="title function_">openSync</span>(<span class="string">&quot;test.txt&quot;</span>,<span class="string">&#x27;w&#x27;</span>);<span class="comment">//打开一个文件，赋予写的权限</span></span><br><span class="line">fs.<span class="title function_">writeSync</span>(fd,<span class="string">&quot;Hello,world&quot;</span>,<span class="number">5</span>);<span class="comment">//往文件写入数据，从第五个位置开始写</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">fs.writeSync(fd,string[,position[,encoding]])</span></span><br><span class="line"><span class="comment">    -fd 文件的描述符，需要传递要写入的文件的描述符</span></span><br><span class="line"><span class="comment">    -string 要写入的内容</span></span><br><span class="line"><span class="comment">    -postion 写入的起始点</span></span><br><span class="line"><span class="comment">    -encoding 编码</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">fs.<span class="title function_">closeSync</span>();</span><br></pre></td></tr></table></figure>
<p><img src="https://cdn.nlark.com/yuque/0/2022/png/32634994/1669564782200-a13869ba-3b7c-4989-9945-e19406e1e73b.png#averageHue=%23a0b4aa&clientId=u5fc5e714-9120-4&from=paste&height=99&id=u4a0d89fa&name=image.png&originHeight=124&originWidth=509&originalType=binary&ratio=1&rotation=0&showTitle=false&size=6269&status=done&style=none&taskId=uafe6197c-1b3d-4e3a-a408-b1febec1b13&title=&width=407.2" alt="image.png"><br>这儿就是同步文件写入的方法</p>
<h2 id="异步文件写入"><a href="#异步文件写入" class="headerlink" title="[*]异步文件写入"></a>[*]异步文件写入</h2><p>在说异步之前，先说一下同步和异步文件写入之间的区别吧</p>
<blockquote>
<p>同步就是指一个进程在执行某个请求的时候，若该请求需要一段时间才能返回信息，那么这个进程将会一直等待下去，直到收到返回信息才继续执行下去；</p>
</blockquote>
<blockquote>
<p>异步是指进程不需要一直等下去，而是继续执行下面的操作，不管其<br>他进程的状态。当有消息返回时系统会通知进程进行处理，这样可以提高执行的效率。</p>
</blockquote>
<p>异步会大大的加大我们写入的效率</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> fs=<span class="built_in">require</span>(<span class="string">&quot;fs&quot;</span>);</span><br><span class="line"><span class="comment">//异步文件的写入</span></span><br><span class="line"><span class="keyword">var</span> fd=fs.<span class="title function_">open</span>(<span class="string">&quot;test.txt&quot;</span>,<span class="string">&#x27;w&#x27;</span>,<span class="keyword">function</span> (<span class="params"></span>)&#123;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">arguments</span>);</span><br><span class="line">&#125;);<span class="comment">//打开一个文件，赋予写的权限</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">fs.open(path,flags[,mode],callback)</span></span><br><span class="line"><span class="comment">- callback是必要参数,是一个函数</span></span><br><span class="line"><span class="comment">- 异步调用方法，结果都是通过回调函数返回的</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>简单地通过异步方法打开一个文件，异步方式中callback是必不可少的参数：<br><img src="https://cdn.nlark.com/yuque/0/2022/png/32634994/1669597593776-6f2c7de1-cc4d-4145-a937-01aac3da935f.png#averageHue=%232e2e2d&clientId=u42eb864f-ef4a-4&from=paste&height=93&id=u3a23e82c&name=image.png&originHeight=116&originWidth=1003&originalType=binary&ratio=1&rotation=0&showTitle=false&size=15040&status=done&style=none&taskId=ub5449124-b0f1-4192-ac66-00f1f27d803&title=&width=802.4" alt="image.png"><br>回调函数里有2个参数，第一个是err错误对象，第二个是fd，是文件的描述符<br>若没错误则err为null，假如出错了就会报错，所以err是第一个参数</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> fs=<span class="built_in">require</span>(<span class="string">&quot;fs&quot;</span>);</span><br><span class="line"><span class="comment">//异步文件的写入</span></span><br><span class="line"><span class="keyword">var</span> fd=fs.<span class="title function_">open</span>(<span class="string">&quot;test.txt&quot;</span>,<span class="string">&#x27;r&#x27;</span>,<span class="keyword">function</span> (<span class="params">err,fd</span>)&#123;</span><br><span class="line"><span class="keyword">if</span>(!err)&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(fd);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span>&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(err);</span><br><span class="line">&#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p><img src="https://cdn.nlark.com/yuque/0/2022/png/32634994/1669597765659-154b5b13-1c68-4995-8693-348b33b9c42f.png#averageHue=%232c2c2c&clientId=u42eb864f-ef4a-4&from=paste&height=183&id=u2ebf4c40&name=image.png&originHeight=229&originWidth=1160&originalType=binary&ratio=1&rotation=0&showTitle=false&size=26361&status=done&style=none&taskId=uf24ad927-01b6-44ad-9af0-8ba375c67c0&title=&width=928" alt="image.png"><br>当我们只给了一个r权限，就报错了，如上</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> fs=<span class="built_in">require</span>(<span class="string">&quot;fs&quot;</span>);</span><br><span class="line"><span class="comment">//异步文件的写入</span></span><br><span class="line"><span class="keyword">var</span> f;</span><br><span class="line"><span class="keyword">var</span> fd=fs.<span class="title function_">open</span>(<span class="string">&quot;test.txt&quot;</span>,<span class="string">&#x27;w&#x27;</span>,<span class="keyword">function</span> (<span class="params">err,fd</span>)&#123;</span><br><span class="line"><span class="keyword">if</span>(!err)&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;open下的代码执行&quot;</span>);</span><br><span class="line">    f=fd;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span>&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(err);</span><br><span class="line">&#125;</span><br><span class="line">&#125;);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(f);</span><br></pre></td></tr></table></figure>
<p>按照逻辑来看，f应该是有值的对不对，但是这是错的，因为异步的方式是没有顺序可谈的：<br><img src="https://cdn.nlark.com/yuque/0/2022/png/32634994/1669597977655-c2396a69-8a1a-4f30-a71f-01d0a4a8f719.png#averageHue=%2399886b&clientId=u42eb864f-ef4a-4&from=paste&height=153&id=u7155b967&name=image.png&originHeight=191&originWidth=1055&originalType=binary&ratio=1&rotation=0&showTitle=false&size=16303&status=done&style=none&taskId=u3d253911-8544-4862-bcad-8b25d3c8c17&title=&width=844" alt="image.png"><br>可以看到是undefined也就是先执行了，这就是异步方式，不会造成堵塞</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> fs=<span class="built_in">require</span>(<span class="string">&quot;fs&quot;</span>);</span><br><span class="line"><span class="comment">//异步文件的写入</span></span><br><span class="line"><span class="keyword">var</span> fd=fs.<span class="title function_">open</span>(<span class="string">&quot;test.txt&quot;</span>,<span class="string">&#x27;w&#x27;</span>,<span class="keyword">function</span> (<span class="params">err,fd</span>)&#123;</span><br><span class="line"><span class="keyword">if</span>(!err)&#123;</span><br><span class="line">    <span class="comment">//如果没出错则写入</span></span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">    fs.write(fd,string,position,encoding,callback)</span></span><br><span class="line"><span class="comment">    callback分为:</span></span><br><span class="line"><span class="comment">    -err 错误</span></span><br><span class="line"><span class="comment">    -written 指定写入多少字节</span></span><br><span class="line"><span class="comment">    -string 内容</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    fs.<span class="title function_">write</span>(fd,<span class="string">&quot;Here is Boogipop&quot;</span>,<span class="keyword">function</span> (<span class="params">err</span>)&#123;</span><br><span class="line">        <span class="keyword">if</span>(!err)&#123;</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;写入成功&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//关闭</span></span><br><span class="line">        fs.<span class="title function_">close</span>(fd,<span class="keyword">function</span> (<span class="params">err</span>)&#123;</span><br><span class="line">            <span class="keyword">if</span>(!err)&#123;</span><br><span class="line">                <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;文件关闭&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span>&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(err);</span><br><span class="line">&#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p><img src="https://cdn.nlark.com/yuque/0/2022/png/32634994/1669598310781-c31a3218-f3b3-4b98-b309-0f8b36f66ade.png#averageHue=%23978266&clientId=u42eb864f-ef4a-4&from=paste&height=188&id=u1d6c2bae&name=image.png&originHeight=235&originWidth=1037&originalType=binary&ratio=1&rotation=0&showTitle=false&size=16381&status=done&style=none&taskId=u2d7a8a17-88a1-44da-a6be-993973b22a6&title=&width=829.6" alt="image.png"><img src="https://cdn.nlark.com/yuque/0/2022/png/32634994/1669598314690-91b8187b-6f3e-4a57-ac05-b6c666e9d809.png#averageHue=%23303030&clientId=u42eb864f-ef4a-4&from=paste&height=34&id=ue06a8506&name=image.png&originHeight=42&originWidth=431&originalType=binary&ratio=1&rotation=0&showTitle=false&size=2711&status=done&style=none&taskId=u53d4b630-99b5-4ffa-8ee6-136424f8fd3&title=&width=344.8" alt="image.png"></p>
<h2 id="简单文件写入"><a href="#简单文件写入" class="headerlink" title="[*]简单文件写入"></a>[*]简单文件写入</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">fs.writeFile(file, data[, options], callback)</span></span><br><span class="line"><span class="comment">fs.writeFileSync(file, data[, options])</span></span><br><span class="line"><span class="comment">-File 要写入文件的路径</span></span><br><span class="line"><span class="comment">-data 要写入的数据</span></span><br><span class="line"><span class="comment">-options 选项，可以对写入进行一些设置</span></span><br><span class="line"><span class="comment">-callback 当写入完成以后执行的函数</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">var</span> fs=<span class="built_in">require</span>(<span class="string">&#x27;fs&#x27;</span>);</span><br><span class="line">fs.<span class="title function_">writeFile</span>(<span class="string">&quot;test2.txt&quot;</span>,<span class="string">&quot;简单文件写入&quot;</span>,<span class="keyword">function</span> (<span class="params">err</span>)&#123;</span><br><span class="line">    <span class="keyword">if</span>(!err)&#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;success&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p><img src="https://cdn.nlark.com/yuque/0/2022/png/32634994/1669598914321-78242d7d-3d31-4ade-85c4-fc9524040d1e.png#averageHue=%23b6b79e&clientId=u42eb864f-ef4a-4&from=paste&height=84&id=u65ff8982&name=image.png&originHeight=105&originWidth=568&originalType=binary&ratio=1&rotation=0&showTitle=false&size=5159&status=done&style=none&taskId=u1afc5524-d8a6-4dd1-8a82-fd7fe180178&title=&width=454.4" alt="image.png"><br>不需要打开和关闭<br><img src="https://cdn.nlark.com/yuque/0/2022/png/32634994/1669599263142-152da657-53cf-4a04-9faa-e20b92957f8e.png#averageHue=%23b9cbd5&clientId=u42eb864f-ef4a-4&from=paste&height=514&id=uc44deebe&name=image.png&originHeight=642&originWidth=992&originalType=binary&ratio=1&rotation=0&showTitle=false&size=553213&status=done&style=none&taskId=udc6729dc-64a8-49a5-b438-7e82bf0e695&title=&width=793.6" alt="image.png"><br>有很多打开状态，假如我们想追加内容，我们只需要用a模式</p>
<h2 id="流式文件写入"><a href="#流式文件写入" class="headerlink" title="[*]流式文件写入"></a>[*]流式文件写入</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">同步和异步，简单文件的方式都不适合大文件的写入，性能较差，容易导致内存溢出</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">var</span> fs=<span class="built_in">require</span>(<span class="string">&quot;fs&quot;</span>);</span><br><span class="line"><span class="comment">//创建流</span></span><br><span class="line"><span class="comment">/* fs.createWriteStream(path[, options])</span></span><br><span class="line"><span class="comment">        -path 路径</span></span><br><span class="line"><span class="comment">        -options 配置参数</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">var</span> ws=fs.<span class="title function_">createWriteStream</span>(<span class="string">&quot;test3.txt&quot;</span>);<span class="comment">//创建可写流</span></span><br><span class="line"><span class="comment">//通过监听流的open和close事件来判断流的打开和关闭</span></span><br><span class="line"><span class="comment">// ws.on(&quot;open&quot;,function ()&#123;</span></span><br><span class="line"><span class="comment">//     console.log(&quot;open&quot;)</span></span><br><span class="line"><span class="comment">// &#125;)</span></span><br><span class="line"><span class="comment">//一次性,触发一次后自动失效</span></span><br><span class="line">ws.<span class="title function_">once</span>(<span class="string">&quot;open&quot;</span>,<span class="keyword">function</span> (<span class="params"></span>)&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;openonce&quot;</span>)</span><br><span class="line">&#125;)</span><br><span class="line">ws.<span class="title function_">once</span>(<span class="string">&quot;close&quot;</span>,<span class="keyword">function</span> (<span class="params"></span>)&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;close&quot;</span>)</span><br><span class="line">&#125;)</span><br><span class="line">ws.<span class="title function_">write</span>(<span class="string">&quot;i&quot;</span>);</span><br><span class="line">ws.<span class="title function_">write</span>(<span class="string">&quot;am&quot;</span>);</span><br><span class="line">ws.<span class="title function_">write</span>(<span class="string">&quot;very&quot;</span>);</span><br><span class="line">ws.<span class="title function_">write</span>(<span class="string">&quot;HOLLOWHOLLOWHOLLOWHOLLOWHOLLOWHOLLOWHOLLOWHOLLOWHOLLOWHOLLOWHOLLOWHOLLOWHOLLOWHOLLOWHOLLOWHOLLOW&quot;</span>);</span><br><span class="line"><span class="comment">//只要流没关闭就可以一直写</span></span><br><span class="line"><span class="comment">//关闭流</span></span><br><span class="line"><span class="comment">// ws.close();</span></span><br><span class="line">ws.<span class="title function_">end</span>();</span><br><span class="line"><span class="comment">// 同样也可以关闭推荐使用</span></span><br></pre></td></tr></table></figure>


<h2 id="简单文件读取"><a href="#简单文件读取" class="headerlink" title="[*]简单文件读取"></a>[*]简单文件读取</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">1.同步文件读取</span></span><br><span class="line"><span class="comment">2.异步文件读取</span></span><br><span class="line"><span class="comment">3.简单文件读取</span></span><br><span class="line"><span class="comment">fs.readFile(path[, options], callback)</span></span><br><span class="line"><span class="comment">fs.readFileSync(path[, options])</span></span><br><span class="line"><span class="comment">    -path 路径</span></span><br><span class="line"><span class="comment">    -options 配置，编码权限</span></span><br><span class="line"><span class="comment">    -callback 回调函数</span></span><br><span class="line"><span class="comment">4.流式文件读取</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">var</span> fs=<span class="built_in">require</span>(<span class="string">&quot;fs&quot;</span>);</span><br><span class="line">fs.<span class="title function_">readFile</span>(<span class="string">&quot;jsFileDict.txt&quot;</span>,<span class="keyword">function</span> (<span class="params">err,data</span>)&#123;</span><br><span class="line">    <span class="keyword">if</span>(!err)&#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(data.<span class="title function_">toString</span>());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p><img src="https://cdn.nlark.com/yuque/0/2022/png/32634994/1669601014058-d9fad47f-da85-4abb-ac3d-9573bc0106d5.png#averageHue=%232c2c2c&clientId=u75e806ab-6247-4&from=paste&height=276&id=u233143b0&name=image.png&originHeight=345&originWidth=980&originalType=binary&ratio=1&rotation=0&showTitle=false&size=24458&status=done&style=none&taskId=u2fe77421-b15a-42eb-8bbc-858ba421ca2&title=&width=784" alt="image.png"><br>也可以读取图片，视频，假如不加tostring读出来的是buffer二进制内容</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> fs=<span class="built_in">require</span>(<span class="string">&quot;fs&quot;</span>);</span><br><span class="line">fs.<span class="title function_">readFile</span>(<span class="string">&quot;jsFileDict.txt&quot;</span>,<span class="keyword">function</span> (<span class="params">err,data</span>)&#123;</span><br><span class="line">    <span class="keyword">if</span>(!err)&#123;</span><br><span class="line">        <span class="comment">// console.log(data.toString());</span></span><br><span class="line">        fs.<span class="title function_">writeFile</span>(<span class="string">&quot;hello.png&quot;</span>,data,<span class="keyword">function</span> (<span class="params">err</span>)&#123;</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;文件复制&quot;</span>)</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p>这样可以实现图片复制</p>
<h2 id="流式文件读取"><a href="#流式文件读取" class="headerlink" title="[*]流式文件读取"></a>[*]流式文件读取</h2><p>适用一些大文件</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> fs=<span class="built_in">require</span>(<span class="string">&quot;fs&quot;</span>);</span><br><span class="line"><span class="comment">//创建可读流</span></span><br><span class="line"><span class="keyword">var</span> rs=fs.<span class="title function_">createReadStream</span>(<span class="string">&quot;yimoto.png&quot;</span>);</span><br><span class="line">rs.<span class="title function_">once</span>(<span class="string">&quot;open&quot;</span>,<span class="keyword">function</span> (<span class="params"></span>)&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;open&quot;</span>)</span><br><span class="line">&#125;);</span><br><span class="line">rs.<span class="title function_">once</span>(<span class="string">&quot;close&quot;</span>,<span class="keyword">function</span> (<span class="params"></span>)&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;close&quot;</span>)</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">//如果要读取一个可读流的数据，必须绑定一个data事件，data事件绑定完毕，它会开始读取数据</span></span><br><span class="line">rs.<span class="title function_">on</span>(<span class="string">&quot;data&quot;</span>,<span class="keyword">function</span> (<span class="params">data</span>)&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(data);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p><img src="https://cdn.nlark.com/yuque/0/2022/png/32634994/1669601676780-85b48b7c-7edf-48f8-b6da-fcf1dfc3b920.png#averageHue=%232c2c2c&clientId=u75e806ab-6247-4&from=paste&height=155&id=ueb8c5858&name=image.png&originHeight=194&originWidth=1880&originalType=binary&ratio=1&rotation=0&showTitle=false&size=24385&status=done&style=none&taskId=u74c003b6-493a-49c5-aac3-101a08d9cf7&title=&width=1504" alt="image.png"><br>文件内容一大就会分次读：<br><code>pipe()</code>：可以直接将可读流文件传到可写流：<br><img src="https://cdn.nlark.com/yuque/0/2022/png/32634994/1669601953576-31f43bad-02b4-4024-9041-87d2c2645f31.png#averageHue=%23f4f9f4&clientId=u75e806ab-6247-4&from=paste&height=495&id=u3b83433e&name=image.png&originHeight=619&originWidth=843&originalType=binary&ratio=1&rotation=0&showTitle=false&size=284206&status=done&style=none&taskId=u6f0ca040-57bd-4435-b0dd-2200906bedf&title=&width=674.4" alt="image.png"></p>
<h2 id="fs模块其他方法"><a href="#fs模块其他方法" class="headerlink" title="fs模块其他方法"></a>fs模块其他方法</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">fs.<span class="title function_">existsSync</span>(path)<span class="comment">//验证路径是否存在</span></span><br><span class="line">fs.<span class="title function_">stat</span>(path,callback)<span class="comment">//获取文件状态，异步</span></span><br><span class="line">fs.<span class="title function_">statSync</span>(path)<span class="comment">//获取文件状态，同步</span></span><br><span class="line">fs.<span class="title function_">unlick</span>(path,callback)<span class="comment">//删除文件，异步</span></span><br><span class="line">fs.<span class="title function_">unlinkSync</span>(path)<span class="comment">//同步</span></span><br><span class="line">fs.<span class="title function_">readdir</span>(path,[,options],callback)<span class="comment">//列出目录文件</span></span><br><span class="line">fs.<span class="title function_">readdirSync</span>(path,[,options])</span><br><span class="line">fs.<span class="title function_">truncate</span>(path,len,callback)<span class="comment">//截断文件</span></span><br><span class="line">fs.<span class="title function_">truncateSync</span>(path,len)</span><br><span class="line">fs.<span class="title function_">mkdir</span>(path,[,mode],callback)<span class="comment">//创建目录</span></span><br><span class="line">fs.<span class="title function_">mkdirSync</span>(path,[,mode])</span><br><span class="line">fs.<span class="title function_">rmdir</span>(path,callback)<span class="comment">//删除文件夹</span></span><br><span class="line">rs.<span class="title function_">rmdirSync</span>(path)</span><br><span class="line">rs.<span class="title function_">rename</span>(oldpath,newpath,callback)<span class="comment">//重命名</span></span><br><span class="line">rs.<span class="title function_">renameSync</span>(old,newpath)</span><br><span class="line">rs.<span class="title function_">watchFile</span>(filename,options,listener)<span class="comment">//监听文件</span></span><br></pre></td></tr></table></figure>
<p><img src="https://cdn.nlark.com/yuque/0/2022/png/32634994/1669602177186-caf5c1c6-07af-4493-9221-16004d8b2929.png#averageHue=%23f2f6f1&clientId=u75e806ab-6247-4&from=paste&height=306&id=u85043d0b&name=image.png&originHeight=383&originWidth=933&originalType=binary&ratio=1&rotation=0&showTitle=false&size=250132&status=done&style=none&taskId=ub12d5964-259d-4afd-b1af-2015922d576&title=&width=746.4" alt="image.png"><br>stat就是文件的状态，stat.size获取大小</p>
<p>完结撒花</p>

    </div>

    
    <div class="about">
        <h1>About this Post</h1>
        <div class="details">
            <p>This post is written by Boogipop, licensed under <a target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc/4.0">CC BY-NC 4.0</a>.</p>
        </div>
        
        <p class="tags">
            
            <i class="icon"></i>
            <a href="/tags/开发/" class="tag">#开发</a>
        </p>
        
    </div>
    

    <div class="container post-prev-next">
        
        <a href="/2023/03/02/Django/" class="next">
            <div>
                <div class="text">
                    <p class="label">Next</p>
                    <h3 class="title">Django</h3>
                </div>
            </div>
        </a>
        
        
        <a href="/2023/03/02/Nginx/" class="prev">
            <div>
                <div class="text">
                    <p class="label">Previous</p>
                    <h3 class="title">Nginx</>
                </div>
            </div>
        </a>
        
    </div>

    
        
        
        <script src="https://giscus.app/client.js" data-repo="Boogipop/Boogipop.github.io" data-repo-id="R_kgDOIFi78g" data-category="Announcements" data-category-id="DIC_kwDOIFi78s4Cav9f" data-mapping="pathname" data-strict="1" data-reactions-enabled="1" data-emit-metadata="0" data-input-position="top" data-theme="preferred_color_scheme" data-lang="zh-CN" crossorigin="anonymous" async></script>
        
    
</article>

        <footer>
    <div class="inner">
        <div class="links">
            
            <div class="group">
                <h2 class="title">Blog</h2>
                
                <a href="/" class="item">Blog</a>
                
                <a href="/archives" class="item">Archives</a>
                
                <a href="/tags" class="item">Tags</a>
                
                <a href="/categories" class="item">Categories</a>
                
                <a href="/search" class="item">Search</a>
                
                <a href="/friends" class="item">Friends</a>
                
                <a href="/about" class="item">About</a>
                
                <a href="/atom.xml" class="item">RSS</a>
                
            </div>
            
            <div class="group">
                <h2 class="title">Projects</h2>
                
                <a target="_blank" rel="noopener" href="https://github.com/MrWillCom/rsa-cli" class="item">RSA CLI</a>
                
                <a target="_blank" rel="noopener" href="https://github.com/MrWillCom/hexo-theme-cupertino" class="item">Hexo Theme Cupertino</a>
                
                <a target="_blank" rel="noopener" href="https://github.com/MrWillCom/a-calendar" class="item">A Calendar</a>
                
                <a target="_blank" rel="noopener" href="https://github.com/MrWillCom/auto-mirroring-bucket" class="item">Auto Mirroring Bucket</a>
                
            </div>
            
            <div class="group">
                <h2 class="title">Me</h2>
                
                <a target="_blank" rel="noopener" href="https://github.com/MrWillCom" class="item">GitHub</a>
                
                <a target="_blank" rel="noopener" href="https://codepen.io/mrwillcom" class="item">CodePen</a>
                
                <a target="_blank" rel="noopener" href="https://www.patreon.com/MrWillCom" class="item">Patreon</a>
                
                <a target="_blank" rel="noopener" href="https://noc.social/@MrWillCom" class="item">Mastodon</a>
                
                <a target="_blank" rel="noopener" href="https://discord.gg/UKuFDjcfY8" class="item">Discord</a>
                
                <a href="mailto:mr.will.com@outlook.com" class="item">Email</a>
                
            </div>
            
        </div>
        <span>&copy; 2024 Boogipop<br>Powered by <a href="http://hexo.io/" target="_blank">Hexo</a> </span>
        
        
            <br>
            <div class="color-scheme-toggle" role="radiogroup" id="theme-color-scheme-toggle">
                <label>
                    <input type="radio" value="light">
                    <span>Light</span>
                </label>
                <label>
                    <input type="radio" value="dark">
                    <span>Dark</span>
                </label>
                <label>
                    <input type="radio" value="auto">
                    <span>Auto</span>
                </label>
            </div>
        
    </div>
</footer>


        
<script src="/js/main.js"></script>

        
        
        

        
        <script src="https://unpkg.com/scrollreveal"></script>
		
        <script>
            window.addEventListener('load', () => {
                ScrollReveal({ delay: 250, reset: true, easing: 'cubic-bezier(0, 0, 0, 1)' })
                ScrollReveal().reveal('.post-list-item .cover-img img')
                ScrollReveal().reveal('.post-list-item, .card, .content p img, .content .block-large img', { distance: '60px', origin: 'bottom', duration: 800 })
            })
        </script>
        
    </body>
</html>